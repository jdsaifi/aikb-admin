(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3338],{7721:(e,s,n)=>{"use strict";n.d(s,{default:()=>N});var t=n(6814),l=n(9926),r=n(3528),i=n(2094),a=n(6147),o=n(1407),c=n(7883),d=n(7307),x=n(4682),h=n(7869),m=n(1079),p=n(4284),u=n(5399),j=n(8154),v=n(5970),f=n(3338),g=n(5397);function N(e){let{call:s,className:n,editCall:N,...b}=e,[w,y]=(0,i.useState)(null),[A,C]=(0,i.useState)(!1),[I,z]=(0,i.useState)([]),[R,P]=(0,i.useTransition)(),Q=(0,a.mN)({resolver:(0,l.u)(r.IH),defaultValues:{name:s.name,description:s.description,negativeQuestions:s.negativeQuestions||"",positiveQuestions:s.positiveQuestions||"",AIPersona:s.AIPersona||"",isActive:s.isActive,documents:void 0}}),D=e=>{e.target.files&&z(Array.from(e.target.files))};return(0,t.jsx)(o.lV,{...Q,children:(0,t.jsxs)("form",{onSubmit:Q.handleSubmit(e=>{let n=new FormData;n.append("name",e.name),n.append("description",e.description),n.append("positiveQuestions",e.positiveQuestions||""),n.append("negativeQuestions",e.negativeQuestions||""),n.append("AIPersona",e.AIPersona||""),n.append("isActive",e.isActive.toString()),I.length>0&&I.forEach(e=>r.g2.map(e=>e.mimetype).includes(e.type)?e.size>1048576?void f.oR.error("File size too large. Maximum size is 5MB."):void n.append("documents",e):void f.oR.error("Invalid file type. Please upload a PDF or DOC file.")),P(()=>{N(s.project.id,s.id,n).then(()=>{f.oR.success("Call updated successfully"),Q.reset()}).catch(e=>{console.log("err: ",e),f.oR.error(e.message)})})}),className:(0,x.cn)("flex flex-col gap-6",n),...b,children:[(0,t.jsx)(o.zB,{control:Q.control,name:"name",render:e=>{let{field:s}=e;return(0,t.jsxs)(o.eI,{children:[(0,t.jsxs)(o.lR,{children:["Name"," ",(0,t.jsx)("span",{className:"text-red-500",children:"(required)"})]}),(0,t.jsx)(o.MJ,{children:(0,t.jsx)(c.p,{...s,placeholder:"Call name"})}),(0,t.jsx)(o.C5,{})]})}}),(0,t.jsx)(o.zB,{control:Q.control,name:"description",render:e=>{let{field:s}=e;return(0,t.jsxs)(o.eI,{children:[(0,t.jsxs)(o.lR,{children:["Description"," ",(0,t.jsx)("span",{className:"text-red-500",children:"(required)"})]}),(0,t.jsx)(o.Rr,{children:"A detailed description of the call. It will help AI to understand the call better and generate questions."}),(0,t.jsx)(o.MJ,{children:(0,t.jsx)(d.T,{placeholder:"Call description",className:"resize-none",style:{minHeight:"200px",maxHeight:"200px",overflow:"auto"},...s})}),(0,t.jsx)(o.C5,{})]})}}),(0,t.jsx)(o.zB,{control:Q.control,name:"positiveQuestions",render:e=>{let{field:s}=e;return(0,t.jsxs)(o.eI,{children:[(0,t.jsxs)(o.lR,{children:["Questions"," ",(0,t.jsx)("span",{className:"text-blue-500",children:"(comma separated)"})]}),(0,t.jsx)(o.Rr,{children:"Define the questions for the call."}),(0,t.jsx)(o.MJ,{children:(0,t.jsx)(d.T,{placeholder:"Questions",className:"resize-none",style:{minHeight:"200px",maxHeight:"200px",overflow:"auto"},...s})}),(0,t.jsx)(o.C5,{})]})}}),(0,t.jsx)(o.zB,{control:Q.control,name:"negativeQuestions",render:e=>{let{field:s}=e;return(0,t.jsxs)(o.eI,{children:[(0,t.jsxs)(o.lR,{children:["Negative Questions"," ",(0,t.jsx)("span",{className:"text-blue-500",children:"(comma separated)"})]}),(0,t.jsx)(o.Rr,{children:"Define the negative questions for the call."}),(0,t.jsx)(o.MJ,{children:(0,t.jsx)(d.T,{placeholder:"Call description",className:"resize-none",style:{minHeight:"200px",maxHeight:"200px",overflow:"auto"},...s})}),(0,t.jsx)(o.C5,{})]})}}),(0,t.jsx)(o.zB,{control:Q.control,name:"AIPersona",render:e=>{let{field:s}=e;return(0,t.jsxs)(o.eI,{children:[(0,t.jsx)(o.lR,{children:"AI Persona"}),(0,t.jsx)(o.Rr,{children:"Define the AI persona for the call."}),(0,t.jsx)(o.MJ,{children:(0,t.jsx)(d.T,{placeholder:"AI persona",className:"resize-none",style:{minHeight:"200px",maxHeight:"200px",overflow:"auto"},...s})}),(0,t.jsx)(o.C5,{})]})}}),(0,t.jsx)(o.zB,{control:Q.control,name:"isActive",render:e=>{let{field:s}=e;return(0,t.jsxs)(o.eI,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[(0,t.jsxs)("div",{className:"space-y-0.5 w-full",children:[(0,t.jsx)(o.lR,{children:"Active?"}),(0,t.jsx)(o.Rr,{children:"Is the call active?"})]}),(0,t.jsx)(o.MJ,{children:(0,t.jsx)(j.d,{checked:s.value,onCheckedChange:s.onChange})})]})}}),(0,t.jsx)(o.zB,{control:Q.control,name:"documents",render:e=>{let{field:{onChange:s}}=e;return(0,t.jsxs)(o.eI,{children:[(0,t.jsx)(o.lR,{children:"Documents (PDF, Doc)"}),(0,t.jsx)(o.MJ,{children:(0,t.jsx)(c.p,{multiple:!0,type:"file",accept:".pdf,.doc,.docx",onChange:D})}),(0,t.jsx)(o.C5,{})]})}}),s.documents&&s.documents.length>0&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium",children:"Uploaded Documents"}),(0,t.jsx)("div",{className:"space-y-2",children:s.documents.map(e=>{var s;return(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(m.A,{className:"w-5 h-5 text-slate-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("button",{type:"button",onClick:()=>{y(e),C(!0)},className:"text-sm font-medium text-slate-900 dark:text-white hover:underline cursor-pointer",children:e.originalname}),(0,t.jsxs)("p",{className:"text-xs text-slate-500",children:[null==(s=r.g2.find(s=>s.mimetype===e.mimetype))?void 0:s.label," ","â€¢ ",(e.size/1024).toFixed(1)," ","KB"]})]})]}),(0,t.jsx)(h.$,{type:"button",variant:"ghost",size:"icon",className:"text-slate-500 hover:text-red-500",disabled:!1,children:(0,t.jsx)(p.A,{className:"w-4 h-4"})})]},e.id)})})]}),(0,t.jsx)(g.lG,{open:A,onOpenChange:C,children:(0,t.jsxs)(g.Cf,{className:"max-w-3xl max-h-[80vh] flex flex-col",children:[(0,t.jsx)(g.c7,{children:(0,t.jsx)(g.L3,{children:null==w?void 0:w.originalname})}),(0,t.jsx)("div",{className:"mt-4 flex-1 overflow-y-auto bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg",children:(0,t.jsx)("pre",{className:"whitespace-pre-wrap text-sm",children:null==w?void 0:w.content})})]})}),(0,t.jsxs)(h.$,{type:"submit",className:"cursor-pointer mt-5",disabled:R,children:[R?(0,t.jsx)(u.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Update Call"]})]})})}},9423:(e,s,n)=>{Promise.resolve().then(n.t.bind(n,1235,23)),Promise.resolve().then(n.bind(n,7721)),Promise.resolve().then(n.bind(n,4852)),Promise.resolve().then(n.bind(n,1898)),Promise.resolve().then(n.bind(n,8657))}},e=>{var s=s=>e(e.s=s);e.O(0,[8264,9615,1235,6828,8067,6114,7768,4852,9161,6788,5097,7358],()=>s(9423)),_N_E=e.O()}]);