(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3239],{722:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,1235,23)),Promise.resolve().then(t.bind(t,4828)),Promise.resolve().then(t.bind(t,4852)),Promise.resolve().then(t.bind(t,1898)),Promise.resolve().then(t.bind(t,8657))},1407:(e,r,t)=>{"use strict";t.d(r,{C5:()=>b,MJ:()=>h,Rr:()=>v,eI:()=>x,lR:()=>f,lV:()=>d,zB:()=>u});var s=t(6814),n=t(2094),a=t(2034),i=t(6147),o=t(4682),l=t(4065);let d=i.Op,c=n.createContext({}),u=e=>{let{...r}=e;return(0,s.jsx)(c.Provider,{value:{name:r.name},children:(0,s.jsx)(i.xI,{...r})})},m=()=>{let e=n.useContext(c),r=n.useContext(p),{getFieldState:t}=(0,i.xW)(),s=(0,i.lN)({name:e.name}),a=t(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=r;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...a}},p=n.createContext({});function x(e){let{className:r,...t}=e,a=n.useId();return(0,s.jsx)(p.Provider,{value:{id:a},children:(0,s.jsx)("div",{"data-slot":"form-item",className:(0,o.cn)("grid gap-2",r),...t})})}function f(e){let{className:r,...t}=e,{error:n,formItemId:a}=m();return(0,s.jsx)(l.J,{"data-slot":"form-label","data-error":!!n,className:(0,o.cn)("data-[error=true]:text-destructive",r),htmlFor:a,...t})}function h(e){let{...r}=e,{error:t,formItemId:n,formDescriptionId:i,formMessageId:o}=m();return(0,s.jsx)(a.DX,{"data-slot":"form-control",id:n,"aria-describedby":t?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!t,...r})}function v(e){let{className:r,...t}=e,{formDescriptionId:n}=m();return(0,s.jsx)("p",{"data-slot":"form-description",id:n,className:(0,o.cn)("text-muted-foreground text-sm",r),...t})}function b(e){var r;let{className:t,...n}=e,{error:a,formMessageId:i}=m(),l=a?String(null!=(r=null==a?void 0:a.message)?r:""):n.children;return l?(0,s.jsx)("p",{"data-slot":"form-message",id:i,className:(0,o.cn)("text-destructive text-sm",t),...n,children:l}):null}},2866:(e,r,t)=>{"use strict";t.d(r,{o:()=>o});var s=t(6814),n=t(2900),a=t(7869),i=t(4682);function o(e){let{className:r,children:t,variant:o="default",...l}=e,d=(0,n.useRouter)();return(0,s.jsx)(a.$,{type:"button",onClick:()=>d.back(),className:(0,i.cn)("cursor-pointer",r),variant:o,...l,children:t})}},3665:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(8681).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},4065:(e,r,t)=>{"use strict";t.d(r,{J:()=>i});var s=t(6814);t(2094);var n=t(7041),a=t(4682);function i(e){let{className:r,...t}=e;return(0,s.jsx)(n.b,{"data-slot":"label",className:(0,a.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",r),...t})}},4828:(e,r,t)=>{"use strict";t.d(r,{AddUserGroupForm:()=>j});var s=t(6814),n=t(6147),a=t(9926),i=t(3103),o=t(4682),l=t(7883),d=t(1407),c=t(7869),u=t(7307),m=t(6271),p=t(4065),x=t(2094),f=t(5399),h=t(5970),v=t(3338),b=t(2866);let g=i.Ik({name:i.Yj().min(1,{message:"Name is required"}),description:i.Yj().optional()});function j(e){let{className:r,modules:t,addUserGroup:i,...j}=e,[k,y]=(0,x.useTransition)(),N=(0,n.mN)({resolver:(0,a.u)(g),defaultValues:{name:"",description:""}}),[w,C]=(0,x.useState)([]),_=(e,r)=>{C(t=>{let s=t.find(r=>r.module===e);if(!s)return[...t,{module:e,actions:[r]}];{let n;return 0===(n=s.actions.includes(r)?s.actions.filter(e=>e!==r):[...s.actions,r]).length?t.filter(r=>r.module!==e):t.map(r=>r.module===e?{...r,actions:n}:r)}})},E=async e=>{try{y(async()=>{let r={name:e.name,description:e.description,permissions:w},t=await i(r);N.reset(),C([]),console.log(t),v.oR.success("User group added successfully")})}catch(e){v.oR.error(e instanceof Error?e.message:"Failed to add user group")}};return(0,s.jsx)(d.lV,{...N,children:(0,s.jsxs)("form",{onSubmit:N.handleSubmit(E),className:(0,o.cn)("flex flex-col gap-6",r),...j,children:[(0,s.jsx)(d.zB,{control:N.control,name:"name",render:e=>{let{field:r}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsxs)(d.lR,{children:["User Group Name"," ",(0,s.jsx)("span",{className:"text-red-500",children:"(required)"})]}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(l.p,{...r,placeholder:"User group name"})}),(0,s.jsx)(d.C5,{})]})}}),(0,s.jsx)(d.zB,{control:N.control,name:"description",render:e=>{let{field:r}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{children:"Description"}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(u.T,{...r,placeholder:"Description",rows:4})}),(0,s.jsx)(d.C5,{})]})}}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xl font-bold mb-5",children:"Module Permissions"}),(0,s.jsx)("div",{className:"flex flex-col gap-2",children:t.map(e=>(0,s.jsxs)("div",{className:"flex flex-col gap-2 border-b border-gray-200 pb-4 w-full justify-between py-2  rounded-md p-4",children:[(0,s.jsxs)("div",{className:"text-lg font-bold flex items-center gap-2",children:[e.displayName," ",(0,s.jsxs)("span",{className:"text-sm text-gray-500",children:["(",e.availablePermissions.length," ","permissions)"]})]}),(0,s.jsx)("div",{className:"flex flex-row gap-2 ml-auto w-full ",children:e.availablePermissions.map(r=>{var t;return(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(m.S,{id:"".concat(e._id,"-").concat(r),className:"border-gray-300",onCheckedChange:()=>{console.log("".concat(e._id,"-").concat(r),"checked"),_(e._id,r)},checked:(null==(t=w.find(r=>r.module===e._id))?void 0:t.actions.includes(r))||!1}),(0,s.jsx)(p.J,{htmlFor:"".concat(e._id,"-").concat(r),className:"text-base font-medium font-normal",children:r})]},r)})})]},e._id))})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)(c.$,{type:"submit",className:"cursor-pointer",disabled:k,children:k?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.A,{className:"animate-spin"}),"Adding User Group..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.A,{className:"w-4 h-4"}),"Add User Group"]})}),(0,s.jsx)(b.o,{variant:"outline",children:"Cancel"})]})]})})}},5970:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(8681).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},6271:(e,r,t)=>{"use strict";t.d(r,{S:()=>P});var s=t(6814),n=t(2094),a=t(1561),i=t(4856),o=t(7414),l=t(937),d=t(9933),c=t(4549),u=t(984),m=t(6236),p="Checkbox",[x,f]=(0,i.A)(p),[h,v]=x(p);function b(e){let{__scopeCheckbox:r,checked:t,children:a,defaultChecked:i,disabled:o,form:d,name:c,onCheckedChange:u,required:m,value:x="on",internal_do_not_use_render:f}=e,[v,b]=(0,l.i)({prop:t,defaultProp:null!=i&&i,onChange:u,caller:p}),[g,j]=n.useState(null),[k,y]=n.useState(null),N=n.useRef(!1),w=!g||!!d||!!g.closest("form"),C={checked:v,disabled:o,setChecked:b,control:g,setControl:j,name:c,form:d,value:x,hasConsumerStoppedPropagationRef:N,required:m,defaultChecked:!_(i)&&i,isFormControl:w,bubbleInput:k,setBubbleInput:y};return(0,s.jsx)(h,{scope:r,...C,children:"function"==typeof f?f(C):a})}var g="CheckboxTrigger",j=n.forwardRef((e,r)=>{let{__scopeCheckbox:t,onKeyDown:i,onClick:l,...d}=e,{control:c,value:u,disabled:p,checked:x,required:f,setControl:h,setChecked:b,hasConsumerStoppedPropagationRef:j,isFormControl:k,bubbleInput:y}=v(g,t),N=(0,a.s)(r,h),w=n.useRef(x);return n.useEffect(()=>{let e=null==c?void 0:c.form;if(e){let r=()=>b(w.current);return e.addEventListener("reset",r),()=>e.removeEventListener("reset",r)}},[c,b]),(0,s.jsx)(m.sG.button,{type:"button",role:"checkbox","aria-checked":_(x)?"mixed":x,"aria-required":f,"data-state":E(x),"data-disabled":p?"":void 0,disabled:p,value:u,...d,ref:N,onKeyDown:(0,o.m)(i,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,o.m)(l,e=>{b(e=>!!_(e)||!e),y&&k&&(j.current=e.isPropagationStopped(),j.current||e.stopPropagation())})})});j.displayName=g;var k=n.forwardRef((e,r)=>{let{__scopeCheckbox:t,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:d,onCheckedChange:c,form:u,...m}=e;return(0,s.jsx)(b,{__scopeCheckbox:t,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:c,name:n,form:u,value:d,internal_do_not_use_render:e=>{let{isFormControl:n}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j,{...m,ref:r,__scopeCheckbox:t}),n&&(0,s.jsx)(C,{__scopeCheckbox:t})]})}})});k.displayName=p;var y="CheckboxIndicator",N=n.forwardRef((e,r)=>{let{__scopeCheckbox:t,forceMount:n,...a}=e,i=v(y,t);return(0,s.jsx)(u.C,{present:n||_(i.checked)||!0===i.checked,children:(0,s.jsx)(m.sG.span,{"data-state":E(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:r,style:{pointerEvents:"none",...e.style}})})});N.displayName=y;var w="CheckboxBubbleInput",C=n.forwardRef((e,r)=>{let{__scopeCheckbox:t,...i}=e,{control:o,hasConsumerStoppedPropagationRef:l,checked:u,defaultChecked:p,required:x,disabled:f,name:h,value:b,form:g,bubbleInput:j,setBubbleInput:k}=v(w,t),y=(0,a.s)(r,k),N=(0,d.Z)(u),C=(0,c.X)(o);n.useEffect(()=>{if(!j)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,r=!l.current;if(N!==u&&e){let t=new Event("click",{bubbles:r});j.indeterminate=_(u),e.call(j,!_(u)&&u),j.dispatchEvent(t)}},[j,N,u,l]);let E=n.useRef(!_(u)&&u);return(0,s.jsx)(m.sG.input,{type:"checkbox","aria-hidden":!0,defaultChecked:null!=p?p:E.current,required:x,disabled:f,name:h,value:b,form:g,...i,tabIndex:-1,ref:y,style:{...i.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function _(e){return"indeterminate"===e}function E(e){return _(e)?"indeterminate":e?"checked":"unchecked"}C.displayName=w;var R=t(3665),I=t(4682);function P(e){let{className:r,...t}=e;return(0,s.jsx)(k,{"data-slot":"checkbox",className:(0,I.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r),...t,children:(0,s.jsx)(N,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,s.jsx)(R.A,{className:"size-3.5"})})})}},7307:(e,r,t)=>{"use strict";t.d(r,{T:()=>a});var s=t(6814);t(2094);var n=t(4682);function a(e){let{className:r,...t}=e;return(0,s.jsx)("textarea",{"data-slot":"textarea",className:(0,n.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),...t})}},9933:(e,r,t)=>{"use strict";t.d(r,{Z:()=>n});var s=t(2094);function n(e){let r=s.useRef({value:e,previous:e});return s.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}}},e=>{var r=r=>e(e.s=r);e.O(0,[8264,9615,1235,6828,8067,6114,7768,4852,6788,5097,7358],()=>r(722)),_N_E=e.O()}]);