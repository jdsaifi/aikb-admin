(()=>{var e={};e.id=8376,e.ids=[8376],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},13999:(e,r,a)=>{"use strict";a.d(r,{A7:()=>n,H6:()=>c,LX:()=>p,Mh:()=>u,aA:()=>l,dk:()=>o,uz:()=>f});var t=a(63073);a(64959);var s=a(26236),i=a(92574),d=a(28551);let l=async()=>{let e=await (0,s.j2)();if(!e?.user)return[];let r=(await i.A.get("/users/calls",{headers:{Authorization:`Bearer ${e.jwt}`}})).data;if("error"===r.status)throw Error(r.data[0].message);return r.data},c=async e=>{let r=await (0,s.j2)();if(!r?.user)return[];let a=(await i.A.get(`/users/calls/${e}`,{headers:{Authorization:`Bearer ${r.jwt}`}})).data;if("error"===a.status)throw Error(a.data[0].message);return a.data[0]},n=async e=>{let r=await (0,s.j2)();if(!r?.user)return[];let a=(await i.A.post("/users/calls",e,{headers:{Authorization:`Bearer ${r.jwt}`,"Content-Type":"multipart/form-data"}})).data;if("error"===a.status)throw Error(a.data[0].message);return a.data},o=async(e,r)=>{let a=await (0,s.j2)();if(!a?.user)return[];let t=(await i.A.put(`/users/calls/${e}`,r,{headers:{Authorization:`Bearer ${a.jwt}`,"Content-Type":"multipart/form-data"}})).data;if("error"===t.status)throw Error(t.data[0].message);return t.data},f=async(e,r)=>{let a=await (0,s.j2)();if(!a?.user)return[];try{return(await i.A.delete(`/users/projects/${e}/calls/${r}`,{headers:{Authorization:`Bearer ${a.jwt}`}})).data.data}catch(e){throw(e?.errorData).error.messages[0]}},u=async e=>{let r=await (0,s.j2)();if(!r?.user)return[];try{return(await i.A.get(`/users/projects/${e}/calls`,{headers:{Authorization:`Bearer ${r.jwt}`}})).data.data}catch(e){throw(e?.errorData).error.messages[0]}},p=async()=>{try{return(await i.A.get("/calls/public")).data.data}catch(e){throw(e?.errorData).error.messages[0]}};(0,d.D)([l,c,n,o,f,u,p]),(0,t.A)(l,"7fce573b7772ab607eb26877638dc35a166cc7900f",null),(0,t.A)(c,"7f7e39a31efb885af3524719a73ea8dcb0bb6ffb23",null),(0,t.A)(n,"7f95c2afeb2ec2e5df8341d35957da13acc2b002c1",null),(0,t.A)(o,"7f83cb0b8cda6c595d33384df7c6adde177d1f13a6",null),(0,t.A)(f,"7fffc7c8b72e45ed2d899105c6eee9ff2f1d6e2c61",null),(0,t.A)(u,"7f4c1c2a36086c0dff9984f1e18899ff4712b442f5",null),(0,t.A)(p,"7f7229df28442cf28802a506825e67b916d63cf58a",null)},16599:(e,r,a)=>{"use strict";a.d(r,{N:()=>i});var t=a(82966),s=a(4535);function i({date:e}){let[r,a]=(0,s.useState)("");return(0,t.jsx)("span",{children:r})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},24385:(e,r,a)=>{"use strict";a.d(r,{CallTable:()=>b});var t=a(82966),s=a(79155),i=a(56995),d=a(31533),l=a.n(d),c=a(47358),n=a(42239),o=a(4535),f=a(16599),u=a(48736),p=a(75960);function b({calls:e,canEditCall:r,canDeleteCall:a,deleteCall:d}){let b=(0,u.useRouter)(),[h,x]=(0,o.useTransition)(),[m,j]=(0,o.useState)(!1),[v,w]=(0,o.useState)(null),A=e=>{w(e),j(!0)};return(0,t.jsxs)("div",{children:[(0,t.jsxs)(i.XI,{children:[(0,t.jsx)(i.A0,{children:(0,t.jsxs)(i.Hj,{children:[(0,t.jsx)(i.nd,{children:"Name"}),(0,t.jsx)(i.nd,{children:"Description"}),(0,t.jsx)(i.nd,{children:"Created By"}),(0,t.jsx)(i.nd,{children:"Created At"}),(0,t.jsx)(i.nd,{children:"..."})]})}),(0,t.jsx)(i.BF,{children:e.map(e=>(0,t.jsxs)(i.Hj,{children:[(0,t.jsx)(i.nA,{children:e.name}),(0,t.jsx)(i.nA,{children:e.description&&e.description?.length>100?e.description?.slice(0,100)+"...":e.description}),(0,t.jsx)(i.nA,{children:e.createdBy.name}),(0,t.jsx)(i.nA,{children:(0,t.jsx)(f.N,{date:e.createdAt})}),(0,t.jsx)(i.nA,{children:(0,t.jsxs)(c.rI,{children:[(0,t.jsx)(c.ty,{asChild:!0,children:(0,t.jsx)(s.$,{variant:"outline",children:"Action"})}),(0,t.jsxs)(c.SQ,{className:"w-56",align:"start",children:[(0,t.jsx)(c.lp,{children:"Actions"}),(0,t.jsxs)(c.I,{children:[r&&(0,t.jsx)(c._2,{children:(0,t.jsx)(l(),{href:`/admin/calls/${e.id}/edit`,className:"cursor-pointer w-full",children:"Edit"})}),a&&(0,t.jsx)(c._2,{className:"cursor-pointer w-full",onClick:()=>A(e),children:"Delete"})]})]})]})})]},e.id))})]}),(0,t.jsx)(n.C,{onConfirm:()=>{v&&x(async()=>{try{await d(v.project._id,v._id),p.oR.success("Call deleted successfully"),j(!1),w(null),b.refresh()}catch(e){p.oR.error(e.message||"Error deleting call")}})},open:m,onOpenChange:j,loading:h})]})}},25440:(e,r,a)=>{Promise.resolve().then(a.t.bind(a,31533,23)),Promise.resolve().then(a.bind(a,24385)),Promise.resolve().then(a.bind(a,38501)),Promise.resolve().then(a.bind(a,80174)),Promise.resolve().then(a.bind(a,70303))},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31663:(e,r,a)=>{"use strict";a.d(r,{CallTable:()=>t});let t=(0,a(32120).registerClientReference)(function(){throw Error("Attempted to call CallTable() from the server but CallTable is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jdsaifi/Developer/Projects/divya-mvps/ai-kb-platform/apps/webapp/src/app/admin/calls/table.tsx","CallTable")},33873:e=>{"use strict";e.exports=require("path")},36905:(e,r,a)=>{"use strict";a.r(r),a.d(r,{GlobalError:()=>d.a,__next_app__:()=>f,pages:()=>o,routeModule:()=>u,tree:()=>n});var t=a(38756),s=a(71739),i=a(98483),d=a.n(i),l=a(53100),c={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);a.d(r,c);let n={children:["",{children:["admin",{children:["calls",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,73454)),"/Users/jdsaifi/Developer/Projects/divya-mvps/ai-kb-platform/apps/webapp/src/app/admin/calls/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,62911)),"/Users/jdsaifi/Developer/Projects/divya-mvps/ai-kb-platform/apps/webapp/src/app/admin/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,91941))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,62615)),"/Users/jdsaifi/Developer/Projects/divya-mvps/ai-kb-platform/apps/webapp/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,92945,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,9932,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,73469,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,91941))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,o=["/Users/jdsaifi/Developer/Projects/divya-mvps/ai-kb-platform/apps/webapp/src/app/admin/calls/page.tsx"],f={require:a,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/admin/calls/page",pathname:"/admin/calls",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},38592:(e,r,a)=>{Promise.resolve().then(a.t.bind(a,46919,23)),Promise.resolve().then(a.bind(a,31663)),Promise.resolve().then(a.bind(a,60910)),Promise.resolve().then(a.bind(a,2376)),Promise.resolve().then(a.bind(a,71913))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},68141:(e,r,a)=>{"use strict";a.r(r),a.d(r,{"7f090f9e5a34fb1f7be8d888b9f14f870fdb2a0d7c":()=>d.m3,"7f0c88e06b3bad703ae193f0f52e050d3be0abe413":()=>d.JQ,"7f143444e3e400671830be6ce02b3ff1d3e9dbf1cc":()=>i.N$,"7f228af614aba0103daf10d4c57416d697ff32364b":()=>i.$$,"7f49e83c0165e8d5d7cc80af01d567c6c8a92d2389":()=>d.lD,"7f4c1c2a36086c0dff9984f1e18899ff4712b442f5":()=>t.Mh,"7f5970b6c0de47a93832f40328853e89a90fa24ad4":()=>d.xr,"7f5a97f4138773f7d8f8713e6048ccd0fe6d20e7a2":()=>i.xA,"7f7229df28442cf28802a506825e67b916d63cf58a":()=>t.LX,"7f7e39a31efb885af3524719a73ea8dcb0bb6ffb23":()=>t.H6,"7f804d520220bdd31092be9af94ca7c8191040f035":()=>i.ip,"7f83cb0b8cda6c595d33384df7c6adde177d1f13a6":()=>t.dk,"7f922df92c230b795598e30cad6e1589c7b6e93962":()=>d.oU,"7f95c2afeb2ec2e5df8341d35957da13acc2b002c1":()=>t.A7,"7fac1e6f69684577729c62c70547d5c2bba4a86072":()=>d.eq,"7fb018cc823e171de450c7c5d722fd8e4049baedec":()=>d.tC,"7fbb8e4164106ecb89672208ff12b7e157dde22a52":()=>d.G6,"7fbf8ceed367c04425332882ac1b853950c858c14a":()=>s.j,"7fcacaf4d942fb25f7ee111fc3a1964d895c639f4b":()=>d.xx,"7fce573b7772ab607eb26877638dc35a166cc7900f":()=>t.aA,"7fdc65967da6e1c64afb55a4baba88495fddfa28df":()=>d.By,"7fdffce87a84d5c83ee3356c6e33814b2d8fad3291":()=>i.SG,"7fe8be6f50d158bd0073e6601575b8573865633d7e":()=>d.vr,"7fffc7c8b72e45ed2d899105c6eee9ff2f1d6e2c61":()=>t.uz});var t=a(13999),s=a(82553),i=a(63636),d=a(90546)},73454:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>b});var t=a(69284),s=a(77457),i=a(50546),d=a(13585),l=a(46919),c=a.n(l),n=a(86557),o=a(13999),f=a(31663),u=a(63636);let p=()=>(0,t.jsx)(i.Qp,{children:(0,t.jsxs)(i.AB,{children:[(0,t.jsx)(i.J5,{children:(0,t.jsx)(i.tJ,{className:"line-clamp-1",children:(0,t.jsx)(c(),{href:"/",children:"Home"})})}),(0,t.jsx)(i.tH,{}),(0,t.jsx)(i.J5,{children:(0,t.jsx)(i.tJ,{className:"line-clamp-1",children:"Calls"})})]})});async function b(){await (0,u.SG)(["calls.view"]);let e=await (0,u.SG)(["calls.create"]),r=await (0,u.SG)(["calls.edit"]),a=await (0,u.SG)(["calls.delete"]);try{let i=await (0,o.aA)();return console.log("calls: ",i),(0,t.jsxs)(s.f,{breadcrumbs:(0,t.jsx)(p,{}),children:[(0,t.jsx)("div",{className:"flex justify-end",children:e&&(0,t.jsx)(d.$,{variant:"outline",asChild:!0,children:(0,t.jsxs)(c(),{href:"/admin/calls/add",children:[(0,t.jsx)(n.A,{className:"mr-2 h-4 w-4"}),"Add Call"]})})}),(0,t.jsx)("div",{className:"flex flex-col gap-4 mt-5",children:i.length>0?(0,t.jsx)(f.CallTable,{calls:i,canEditCall:r,canDeleteCall:a,deleteCall:o.uz}):(0,t.jsx)("div",{className:"flex flex-col gap-4 text-center bg-muted p-5 rounded-md",children:(0,t.jsx)("p",{children:"No calls found"})})})]})}catch(e){return console.log("err: ",e),(0,t.jsx)("div",{children:"Error"})}}},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},94735:e=>{"use strict";e.exports=require("events")}};var r=require("../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),t=r.X(0,[6442,3174,7063,3805,9667,8910,1533,2998,6424,4901,4723,7513,2904,4946],()=>a(36905));module.exports=t})();