(()=>{var e={};e.id=8631,e.ids=[8631],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9408:(e,r,s)=>{Promise.resolve().then(s.bind(s,17071)),Promise.resolve().then(s.bind(s,38501)),Promise.resolve().then(s.bind(s,80174)),Promise.resolve().then(s.bind(s,70303))},10541:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>p});var t=s(69284),i=s(77457),o=s(50546),n=s(1571),a=s(29247),l=s(35865);let d=({data:e})=>(0,t.jsx)(o.Qp,{children:(0,t.jsxs)(o.AB,{children:[(0,t.jsx)(o.J5,{children:(0,t.jsx)(o.w1,{href:"/",children:"Home"})}),(0,t.jsx)(o.tH,{}),(0,t.jsx)(o.J5,{children:(0,t.jsx)(o.w1,{href:"/user-groups",children:"User Groups"})}),(0,t.jsx)(o.tH,{}),(0,t.jsx)(o.J5,{children:(0,t.jsx)(o.w1,{href:`/user-groups/${e._id}`,children:"Edit User Group"})})]})});async function p({params:e}){let r=await (0,n.e)(),{userGroupId:s}=await e,o=await (0,a.lJ)(s);return(0,t.jsx)(i.f,{breadcrumbs:(0,t.jsx)(d,{data:o}),children:(0,t.jsx)("div",{className:"mx-auto h-full w-full max-w-3xl rounded-xl",children:(0,t.jsx)("div",{className:"flex flex-1 flex-col gap-4 px-4 py-10",children:(0,t.jsx)(l.EditUserGroupForm,{modules:r,userGroup:o,updateUserGroup:a.iJ})})})})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},17071:(e,r,s)=>{"use strict";s.d(r,{EditUserGroupForm:()=>g});var t=s(82966),i=s(93717),o=s(40451),n=s(83148),a=s(75909),l=s(38683),d=s(30848),p=s(19977),u=s(14445),c=s(55787),m=s(4535),x=s(62117),h=s(33354),f=s(79155),j=s(75960),v=s(56236);let b=d.Ik({name:d.Yj().min(1,{message:"Name is required"}),description:d.Yj().optional()});function g({className:e,modules:r,userGroup:s,updateUserGroup:d,...g}){let[y,P]=(0,m.useTransition)(),w=(0,a.mN)({resolver:(0,l.u)(b),defaultValues:{name:s.name,description:s.description}}),[G,_]=(0,m.useState)(s.permissions.map(e=>({module:e.module?._id,actions:e.actions}))),q=(e,r)=>{_(s=>{let t=s.find(r=>r.module===e);if(!t)return[...s,{module:e,actions:[r]}];{let i;return 0===(i=t.actions.includes(r)?t.actions.filter(e=>e!==r):[...t.actions,r]).length?s.filter(r=>r.module!==e):s.map(r=>r.module===e?{...r,actions:i}:r)}})},U=async e=>{P(async()=>{try{let r={name:e.name,description:e.description,permissions:G},t=await d(s._id,r);console.log("updatedUserGroup: ",t),j.oR.success("User group updated successfully")}catch(e){console.error("Error updating user group: ",e),j.oR.error("Error updating user group")}})};return(0,t.jsx)(i.lV,{...w,children:(0,t.jsxs)("form",{onSubmit:w.handleSubmit(U),className:(0,n.cn)("flex flex-col gap-6",e),...g,children:[(0,t.jsx)(i.zB,{control:w.control,name:"name",render:({field:e})=>(0,t.jsxs)(i.eI,{children:[(0,t.jsxs)(i.lR,{children:["User Group Name"," ",(0,t.jsx)("span",{className:"text-red-500",children:"(required)"})]}),(0,t.jsx)(i.MJ,{children:(0,t.jsx)(o.p,{...e,placeholder:"User group name"})}),(0,t.jsx)(i.C5,{})]})}),(0,t.jsx)(i.zB,{control:w.control,name:"description",render:({field:e})=>(0,t.jsxs)(i.eI,{children:[(0,t.jsx)(i.lR,{children:"Description"}),(0,t.jsx)(i.MJ,{children:(0,t.jsx)(p.T,{...e,placeholder:"Description",rows:4})}),(0,t.jsx)(i.C5,{})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xl font-bold mb-5",children:"Module Permissions"}),(0,t.jsx)("div",{className:"flex flex-col gap-2",children:r.map(e=>(0,t.jsxs)("div",{className:"flex flex-col gap-2 border-b border-gray-200 pb-4 w-full justify-between py-2  rounded-md p-4",children:[(0,t.jsxs)("div",{className:"text-lg font-bold flex items-center gap-2",children:[e.displayName," ",(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:["(",e.availablePermissions.length," ","permissions)"]})]}),(0,t.jsx)("div",{className:"flex flex-row gap-2 ml-auto w-full ",children:e.availablePermissions.map(r=>(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.S,{id:`${e._id}-${r}`,className:"border-gray-300",onCheckedChange:()=>{console.log(`${e._id}-${r}`,"checked"),q(e._id,r)},checked:G.find(r=>r.module===e._id)?.actions.includes(r)||!1}),(0,t.jsx)(u.J,{htmlFor:`${e._id}-${r}`,className:"text-base font-medium font-normal",children:r})]},r))})]},e._id))})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(f.$,{type:"submit",className:"cursor-pointer",disabled:y,children:y?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.A,{className:"animate-spin"}),"Updating User Group..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.A,{className:"w-4 h-4"}),"Update User Group"]})}),(0,t.jsx)(v.o,{variant:"outline",children:"Cancel"})]})]})})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},35865:(e,r,s)=>{"use strict";s.d(r,{EditUserGroupForm:()=>t});let t=(0,s(32120).registerClientReference)(function(){throw Error("Attempted to call EditUserGroupForm() from the server but EditUserGroupForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jdsaifi/Developer/Projects/divya-mvps/ai-kb-platform/apps/webapp/src/app/admin/user-groups/[userGroupId]/edit-user-group-form.tsx","EditUserGroupForm")},43973:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>p,routeModule:()=>c,tree:()=>d});var t=s(38756),i=s(71739),o=s(98483),n=s.n(o),a=s(53100),l={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);s.d(r,l);let d={children:["",{children:["admin",{children:["user-groups",{children:["[userGroupId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,10541)),"/Users/jdsaifi/Developer/Projects/divya-mvps/ai-kb-platform/apps/webapp/src/app/admin/user-groups/[userGroupId]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,62911)),"/Users/jdsaifi/Developer/Projects/divya-mvps/ai-kb-platform/apps/webapp/src/app/admin/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,91941))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,62615)),"/Users/jdsaifi/Developer/Projects/divya-mvps/ai-kb-platform/apps/webapp/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,92945,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9932,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,73469,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,91941))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,p=["/Users/jdsaifi/Developer/Projects/divya-mvps/ai-kb-platform/apps/webapp/src/app/admin/user-groups/[userGroupId]/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},c=new t.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/admin/user-groups/[userGroupId]/page",pathname:"/admin/user-groups/[userGroupId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},45856:(e,r,s)=>{Promise.resolve().then(s.bind(s,35865)),Promise.resolve().then(s.bind(s,60910)),Promise.resolve().then(s.bind(s,2376)),Promise.resolve().then(s.bind(s,71913))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},94735:e=>{"use strict";e.exports=require("events")}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[6442,3174,7063,3805,9667,8910,1533,2998,6424,4901,4723,4307,7513,2904,29],()=>s(43973));module.exports=t})();