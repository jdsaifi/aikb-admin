(()=>{var e={};e.id=8733,e.ids=[8733],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12251:(e,r,s)=>{"use strict";s.d(r,{z:()=>d});var t=s(82966),a=s(31533),i=s.n(a),n=s(83148);function d({href:e,children:r,className:s}){return(0,t.jsx)(i(),{href:e,className:(0,n.cn)("hover:underline hover:text-blue-500 hover:cursor-pointer text-blue-500",s),children:r})}},12278:(e,r,s)=>{Promise.resolve().then(s.t.bind(s,46919,23)),Promise.resolve().then(s.bind(s,30460)),Promise.resolve().then(s.bind(s,60910)),Promise.resolve().then(s.bind(s,2376)),Promise.resolve().then(s.bind(s,71913))},12412:e=>{"use strict";e.exports=require("assert")},16099:(e,r,s)=>{"use strict";s.r(r),s.d(r,{"7f090f9e5a34fb1f7be8d888b9f14f870fdb2a0d7c":()=>n.m3,"7f0c88e06b3bad703ae193f0f52e050d3be0abe413":()=>n.JQ,"7f143444e3e400671830be6ce02b3ff1d3e9dbf1cc":()=>i.N$,"7f155da1409e4ef0577db35c164a36a9bddb7d2795":()=>t.TK,"7f228af614aba0103daf10d4c57416d697ff32364b":()=>i.$$,"7f49e83c0165e8d5d7cc80af01d567c6c8a92d2389":()=>n.lD,"7f5970b6c0de47a93832f40328853e89a90fa24ad4":()=>n.xr,"7f5a97f4138773f7d8f8713e6048ccd0fe6d20e7a2":()=>i.xA,"7f68161127c85106803fcda82647b2d9e276c8bebc":()=>t.kl,"7f804d520220bdd31092be9af94ca7c8191040f035":()=>i.ip,"7f83ba3685a4f6947f5e5fde0aa6dc8541b24746d0":()=>t.lo,"7f922df92c230b795598e30cad6e1589c7b6e93962":()=>n.oU,"7fac1e6f69684577729c62c70547d5c2bba4a86072":()=>n.eq,"7fb018cc823e171de450c7c5d722fd8e4049baedec":()=>n.tC,"7fbb8e4164106ecb89672208ff12b7e157dde22a52":()=>n.G6,"7fbf8ceed367c04425332882ac1b853950c858c14a":()=>a.j,"7fcacaf4d942fb25f7ee111fc3a1964d895c639f4b":()=>n.xx,"7fd41f73ef47ddd37eae3958acef989ce7663c1696":()=>t.hG,"7fdc65967da6e1c64afb55a4baba88495fddfa28df":()=>n.By,"7fdffce87a84d5c83ee3356c6e33814b2d8fad3291":()=>i.SG,"7fe0d69028a6b867e14e2d0db090f4128df0f46202":()=>t.nu,"7fe8be6f50d158bd0073e6601575b8573865633d7e":()=>n.vr});var t=s(24298),a=s(82553),i=s(63636),n=s(90546)},16599:(e,r,s)=>{"use strict";s.d(r,{N:()=>i});var t=s(82966),a=s(4535);function i({date:e}){let[r,s]=(0,a.useState)("");return(0,t.jsx)("span",{children:r})}},19082:(e,r,s)=>{"use strict";s.d(r,{UserTable:()=>x});var t=s(82966),a=s(56995),i=s(12251),n=s(79155),d=s(47358),o=s(31533),c=s.n(o),l=s(4535),u=s(16599),f=s(75960),p=s(42239),b=s(48736),h=s(47618);function x({data:e,deleteUser:r,canDeleteUser:s,canEditUser:o}){let x=(0,b.useRouter)(),[v,m]=(0,l.useTransition)(),[j,g]=(0,l.useState)(!1),[w,y]=(0,l.useState)(null),A=e=>{g(!0),y(e)};return(0,t.jsxs)("div",{children:[(0,t.jsxs)(a.XI,{children:[(0,t.jsx)(a.A0,{children:(0,t.jsxs)(a.Hj,{children:[(0,t.jsx)(a.nd,{children:"Name"}),(0,t.jsx)(a.nd,{children:"Email"}),(0,t.jsx)(a.nd,{children:"Group"}),(0,t.jsx)(a.nd,{children:"Tags"}),(0,t.jsx)(a.nd,{children:"Created At"}),(0,t.jsx)(a.nd,{children:"..."})]})}),(0,t.jsx)(a.BF,{children:e.map(e=>(0,t.jsxs)(a.Hj,{children:[(0,t.jsxs)(a.nA,{children:[o&&(0,t.jsx)(i.z,{href:`/admin/users/${e._id}`,className:"text-blue-500 hover:underline",children:e.name}),!o&&(0,t.jsx)("span",{children:e.name})]}),(0,t.jsx)(a.nA,{children:e.email}),(0,t.jsx)(a.nA,{children:e.userGroup?.name}),(0,t.jsx)(a.nA,{children:e.tags.map(e=>(0,t.jsx)(h.E,{variant:"secondary",className:"mr-1 mb-1",children:e},e))}),(0,t.jsx)(a.nA,{children:(0,t.jsx)(u.N,{date:e.createdAt})}),(0,t.jsx)(a.nA,{children:(0,t.jsxs)(d.rI,{children:[(0,t.jsx)(d.ty,{asChild:!0,children:(0,t.jsx)(n.$,{variant:"outline",children:"Action"})}),(0,t.jsxs)(d.SQ,{className:"w-56",align:"start",children:[(0,t.jsx)(d.lp,{children:"Actions"}),(0,t.jsxs)(d.I,{children:[o&&(0,t.jsx)(d._2,{children:(0,t.jsx)(c(),{href:`/admin/users/${e._id}`,className:"w-full",children:"Edit"})}),s&&(0,t.jsx)(d._2,{className:"cursor-pointer w-full",onClick:()=>A(e._id),children:"Delete"})]})]})]})})]},e._id))})]}),(0,t.jsx)(p.C,{open:j,onOpenChange:g,onConfirm:()=>{m(async()=>{let e=await r(w);if(e.error)return void f.oR.error(e.error);g(!1),y(null),f.oR.success("User deleted successfully"),x.refresh()})},loading:v})]})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},23902:(e,r,s)=>{Promise.resolve().then(s.t.bind(s,31533,23)),Promise.resolve().then(s.bind(s,19082)),Promise.resolve().then(s.bind(s,38501)),Promise.resolve().then(s.bind(s,80174)),Promise.resolve().then(s.bind(s,70303))},24298:(e,r,s)=>{"use strict";s.d(r,{TK:()=>c,hG:()=>u,kl:()=>o,lo:()=>d,nu:()=>l});var t=s(63073);s(64959);var a=s(26236),i=s(92574),n=s(28551);let d=async()=>{let e=await (0,a.j2)();if(!e?.user)return[];let r=(await i.A.get("/users",{headers:{Authorization:`Bearer ${e.jwt}`}})).data;if("error"===r.status)throw Error(r.data[0].message);return r.data},o=async e=>{let r=await (0,a.j2)();if(!r?.user)return null;let s=(await i.A.get(`/users/${e}`,{headers:{Authorization:`Bearer ${r.jwt}`}})).data;if("error"===s.status)throw Error(s.data[0].message);return s.data[0]},c=async(e,r)=>{let s=await (0,a.j2)();return s?.user?(await i.A.put(`/users/${e}`,r,{headers:{Authorization:`Bearer ${s.jwt}`}})).data[0]:null},l=async e=>{let r=await (0,a.j2)();return r?.user?(await i.A.post("/users",e,{headers:{Authorization:`Bearer ${r.jwt}`}})).data[0]:null},u=async e=>{let r,s=null;try{let t=await (0,a.j2)();if(!t?.user)return s="Unauthorized",{data:r,error:s};r=(await i.A.delete(`/users/${e}`,{headers:{Authorization:`Bearer ${t.jwt}`}})).data.data}catch(e){s=e?.errorData?e.errorData.error.messages[0]:e.message}return{data:r,error:s}};(0,n.D)([d,o,c,l,u]),(0,t.A)(d,"7f83ba3685a4f6947f5e5fde0aa6dc8541b24746d0",null),(0,t.A)(o,"7f68161127c85106803fcda82647b2d9e276c8bebc",null),(0,t.A)(c,"7f155da1409e4ef0577db35c164a36a9bddb7d2795",null),(0,t.A)(l,"7fe0d69028a6b867e14e2d0db090f4128df0f46202",null),(0,t.A)(u,"7fd41f73ef47ddd37eae3958acef989ce7663c1696",null)},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30460:(e,r,s)=>{"use strict";s.d(r,{UserTable:()=>t});let t=(0,s(32120).registerClientReference)(function(){throw Error("Attempted to call UserTable() from the server but UserTable is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jdsaifi/Developer/Projects/divya-mvps/ai-kb-platform/apps/webapp/src/app/admin/users/table.tsx","UserTable")},33873:e=>{"use strict";e.exports=require("path")},47618:(e,r,s)=>{"use strict";s.d(r,{E:()=>o});var t=s(82966);s(4535);var a=s(94710),i=s(38646),n=s(83148);let d=(0,i.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:r,asChild:s=!1,...i}){let o=s?a.DX:"span";return(0,t.jsx)(o,{"data-slot":"badge",className:(0,n.cn)(d({variant:r}),e),...i})}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63049:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>l,routeModule:()=>f,tree:()=>c});var t=s(38756),a=s(71739),i=s(98483),n=s.n(i),d=s(53100),o={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>d[e]);s.d(r,o);let c={children:["",{children:["admin",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,68919)),"/Users/jdsaifi/Developer/Projects/divya-mvps/ai-kb-platform/apps/webapp/src/app/admin/users/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,62911)),"/Users/jdsaifi/Developer/Projects/divya-mvps/ai-kb-platform/apps/webapp/src/app/admin/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,91941))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,62615)),"/Users/jdsaifi/Developer/Projects/divya-mvps/ai-kb-platform/apps/webapp/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,92945,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9932,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,73469,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,91941))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,l=["/Users/jdsaifi/Developer/Projects/divya-mvps/ai-kb-platform/apps/webapp/src/app/admin/users/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},f=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/users/page",pathname:"/admin/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},68919:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>b});var t=s(69284),a=s(24298),i=s(50546),n=s(77457),d=s(30460),o=s(13585),c=s(46919),l=s.n(c),u=s(86557),f=s(63636);let p=()=>(0,t.jsx)(i.Qp,{children:(0,t.jsxs)(i.AB,{children:[(0,t.jsx)(i.J5,{children:(0,t.jsx)(i.w1,{href:"/",children:"Home"})}),(0,t.jsx)(i.tH,{}),(0,t.jsx)(i.J5,{children:(0,t.jsx)(i.w1,{href:"/users",children:"Users"})})]})});async function b(){let e=await (0,f.SG)(["users.delete"]),r=await (0,f.SG)(["users.edit"]),s=await (0,f.SG)(["users.create"]),i=await (0,a.lo)();return(0,t.jsx)(n.f,{breadcrumbs:(0,t.jsx)(p,{}),children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)("div",{className:"flex justify-end",children:s&&(0,t.jsx)(o.$,{variant:"outline",asChild:!0,children:(0,t.jsxs)(l(),{href:"/admin/users/add",children:[(0,t.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"Add User"]})})}),(0,t.jsx)(d.UserTable,{data:i,deleteUser:a.hG,canEditUser:r,canDeleteUser:e})]})})}},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},94735:e=>{"use strict";e.exports=require("events")}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[6442,3174,7063,3805,9667,8910,1533,2998,6424,4901,4723,7513,2904,4946],()=>s(63049));module.exports=t})();