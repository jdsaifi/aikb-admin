(()=>{var e={};e.id=3338,e.ids=[3338],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},17323:(e,s,r)=>{"use strict";r.d(s,{default:()=>g});var t=r(82966),i=r(38683),l=r(22372),a=r(4535),n=r(75909),o=r(93717),d=r(40451),c=r(19977),p=r(83148),x=r(79155),m=r(17805),h=r(42474),u=r(62117),j=r(5386),v=r(33354),f=r(75960),b=r(96783);function g({call:e,className:s,editCall:r,...g}){let[y,P]=(0,a.useState)(null),[w,N]=(0,a.useState)(!1),[A,C]=(0,a.useState)([]),[I,q]=(0,a.useTransition)(),_=(0,n.mN)({resolver:(0,i.u)(l.IH),defaultValues:{name:e.name,description:e.description,negativeQuestions:e.negativeQuestions||"",positiveQuestions:e.positiveQuestions||"",AIPersona:e.AIPersona||"",isActive:e.isActive,documents:void 0}}),k=e=>{e.target.files&&C(Array.from(e.target.files))};return(0,t.jsx)(o.lV,{..._,children:(0,t.jsxs)("form",{onSubmit:_.handleSubmit(s=>{let t=new FormData;t.append("name",s.name),t.append("description",s.description),t.append("positiveQuestions",s.positiveQuestions||""),t.append("negativeQuestions",s.negativeQuestions||""),t.append("AIPersona",s.AIPersona||""),t.append("isActive",s.isActive.toString()),A.length>0&&A.forEach(e=>l.g2.map(e=>e.mimetype).includes(e.type)?e.size>1048576?void f.oR.error("File size too large. Maximum size is 5MB."):void t.append("documents",e):void f.oR.error("Invalid file type. Please upload a PDF or DOC file.")),q(()=>{r(e.project.id,e.id,t).then(()=>{f.oR.success("Call updated successfully"),_.reset()}).catch(e=>{console.log("err: ",e),f.oR.error(e.message)})})}),className:(0,p.cn)("flex flex-col gap-6",s),...g,children:[(0,t.jsx)(o.zB,{control:_.control,name:"name",render:({field:e})=>(0,t.jsxs)(o.eI,{children:[(0,t.jsxs)(o.lR,{children:["Name"," ",(0,t.jsx)("span",{className:"text-red-500",children:"(required)"})]}),(0,t.jsx)(o.MJ,{children:(0,t.jsx)(d.p,{...e,placeholder:"Call name"})}),(0,t.jsx)(o.C5,{})]})}),(0,t.jsx)(o.zB,{control:_.control,name:"description",render:({field:e})=>(0,t.jsxs)(o.eI,{children:[(0,t.jsxs)(o.lR,{children:["Description"," ",(0,t.jsx)("span",{className:"text-red-500",children:"(required)"})]}),(0,t.jsx)(o.Rr,{children:"A detailed description of the call. It will help AI to understand the call better and generate questions."}),(0,t.jsx)(o.MJ,{children:(0,t.jsx)(c.T,{placeholder:"Call description",className:"resize-none",style:{minHeight:"200px",maxHeight:"200px",overflow:"auto"},...e})}),(0,t.jsx)(o.C5,{})]})}),(0,t.jsx)(o.zB,{control:_.control,name:"positiveQuestions",render:({field:e})=>(0,t.jsxs)(o.eI,{children:[(0,t.jsxs)(o.lR,{children:["Questions"," ",(0,t.jsx)("span",{className:"text-blue-500",children:"(comma separated)"})]}),(0,t.jsx)(o.Rr,{children:"Define the questions for the call."}),(0,t.jsx)(o.MJ,{children:(0,t.jsx)(c.T,{placeholder:"Questions",className:"resize-none",style:{minHeight:"200px",maxHeight:"200px",overflow:"auto"},...e})}),(0,t.jsx)(o.C5,{})]})}),(0,t.jsx)(o.zB,{control:_.control,name:"negativeQuestions",render:({field:e})=>(0,t.jsxs)(o.eI,{children:[(0,t.jsxs)(o.lR,{children:["Negative Questions"," ",(0,t.jsx)("span",{className:"text-blue-500",children:"(comma separated)"})]}),(0,t.jsx)(o.Rr,{children:"Define the negative questions for the call."}),(0,t.jsx)(o.MJ,{children:(0,t.jsx)(c.T,{placeholder:"Call description",className:"resize-none",style:{minHeight:"200px",maxHeight:"200px",overflow:"auto"},...e})}),(0,t.jsx)(o.C5,{})]})}),(0,t.jsx)(o.zB,{control:_.control,name:"AIPersona",render:({field:e})=>(0,t.jsxs)(o.eI,{children:[(0,t.jsx)(o.lR,{children:"AI Persona"}),(0,t.jsx)(o.Rr,{children:"Define the AI persona for the call."}),(0,t.jsx)(o.MJ,{children:(0,t.jsx)(c.T,{placeholder:"AI persona",className:"resize-none",style:{minHeight:"200px",maxHeight:"200px",overflow:"auto"},...e})}),(0,t.jsx)(o.C5,{})]})}),(0,t.jsx)(o.zB,{control:_.control,name:"isActive",render:({field:e})=>(0,t.jsxs)(o.eI,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[(0,t.jsxs)("div",{className:"space-y-0.5 w-full",children:[(0,t.jsx)(o.lR,{children:"Active?"}),(0,t.jsx)(o.Rr,{children:"Is the call active?"})]}),(0,t.jsx)(o.MJ,{children:(0,t.jsx)(j.d,{checked:e.value,onCheckedChange:e.onChange})})]})}),(0,t.jsx)(o.zB,{control:_.control,name:"documents",render:({field:{onChange:e}})=>(0,t.jsxs)(o.eI,{children:[(0,t.jsx)(o.lR,{children:"Documents (PDF, Doc)"}),(0,t.jsx)(o.MJ,{children:(0,t.jsx)(d.p,{multiple:!0,type:"file",accept:".pdf,.doc,.docx",onChange:k})}),(0,t.jsx)(o.C5,{})]})}),e.documents&&e.documents.length>0&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium",children:"Uploaded Documents"}),(0,t.jsx)("div",{className:"space-y-2",children:e.documents.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(m.A,{className:"w-5 h-5 text-slate-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("button",{type:"button",onClick:()=>{P(e),N(!0)},className:"text-sm font-medium text-slate-900 dark:text-white hover:underline cursor-pointer",children:e.originalname}),(0,t.jsxs)("p",{className:"text-xs text-slate-500",children:[l.g2.find(s=>s.mimetype===e.mimetype)?.label," ","â€¢ ",(e.size/1024).toFixed(1)," ","KB"]})]})]}),(0,t.jsx)(x.$,{type:"button",variant:"ghost",size:"icon",className:"text-slate-500 hover:text-red-500",disabled:!1,children:(0,t.jsx)(h.A,{className:"w-4 h-4"})})]},e.id))})]}),(0,t.jsx)(b.lG,{open:w,onOpenChange:N,children:(0,t.jsxs)(b.Cf,{className:"max-w-3xl max-h-[80vh] flex flex-col",children:[(0,t.jsx)(b.c7,{children:(0,t.jsx)(b.L3,{children:y?.originalname})}),(0,t.jsx)("div",{className:"mt-4 flex-1 overflow-y-auto bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg",children:(0,t.jsx)("pre",{className:"whitespace-pre-wrap text-sm",children:y?.content})})]})}),(0,t.jsxs)(x.$,{type:"submit",className:"cursor-pointer mt-5",disabled:I,children:[I?(0,t.jsx)(u.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Update Call"]})]})})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21497:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>a.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>d});var t=r(38756),i=r(71739),l=r(98483),a=r.n(l),n=r(53100),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(s,o);let d={children:["",{children:["admin",{children:["projects",{children:["[id]",{children:["calls_old",{children:["[callId]",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,90940)),"/Users/jdsaifi/Developer/Projects/divya-mvps/ai-kb-platform/apps/webapp/src/app/admin/projects/[id]/calls_old/[callId]/edit/page.tsx"]}]},{}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,62911)),"/Users/jdsaifi/Developer/Projects/divya-mvps/ai-kb-platform/apps/webapp/src/app/admin/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,91941))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,62615)),"/Users/jdsaifi/Developer/Projects/divya-mvps/ai-kb-platform/apps/webapp/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,92945,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9932,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,73469,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,91941))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/jdsaifi/Developer/Projects/divya-mvps/ai-kb-platform/apps/webapp/src/app/admin/projects/[id]/calls_old/[callId]/edit/page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/admin/projects/[id]/calls_old/[callId]/edit/page",pathname:"/admin/projects/[id]/calls_old/[callId]/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},54753:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,46919,23)),Promise.resolve().then(r.bind(r,67593)),Promise.resolve().then(r.bind(r,60910)),Promise.resolve().then(r.bind(r,2376)),Promise.resolve().then(r.bind(r,71913))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},67593:(e,s,r)=>{"use strict";r.d(s,{default:()=>t});let t=(0,r(32120).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jdsaifi/Developer/Projects/divya-mvps/ai-kb-platform/apps/webapp/src/app/admin/projects/[id]/calls_old/[callId]/edit/edit-call-form.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jdsaifi/Developer/Projects/divya-mvps/ai-kb-platform/apps/webapp/src/app/admin/projects/[id]/calls_old/[callId]/edit/edit-call-form.tsx","default")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},84257:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,31533,23)),Promise.resolve().then(r.bind(r,17323)),Promise.resolve().then(r.bind(r,38501)),Promise.resolve().then(r.bind(r,80174)),Promise.resolve().then(r.bind(r,70303))},90940:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>u,dynamic:()=>m});var t=r(69284),i=r(77457),l=r(13999),a=r(50546),n=r(46919),o=r.n(n),d=r(67593),c=r(13585),p=r(86557),x=r(86962);let m="force-dynamic",h=({data:e})=>(0,t.jsx)(a.Qp,{children:(0,t.jsxs)(a.AB,{children:[(0,t.jsx)(a.J5,{children:(0,t.jsx)(a.tJ,{className:"line-clamp-1",children:(0,t.jsx)(o(),{href:"/projects",children:"Projects"})})}),(0,t.jsx)(a.tH,{}),(0,t.jsx)(a.J5,{children:(0,t.jsx)(a.tJ,{className:"line-clamp-1",children:e.project.name})}),(0,t.jsx)(a.tH,{}),(0,t.jsx)(a.J5,{children:(0,t.jsx)(a.tJ,{className:"line-clamp-1",children:(0,t.jsx)(o(),{href:`/projects/${e.project.id}/calls`,children:"Calls"})})}),(0,t.jsx)(a.tH,{}),(0,t.jsx)(a.J5,{children:(0,t.jsx)(a.tJ,{className:"line-clamp-1",children:e.name})})]})});async function u({params:e}){let{id:s,callId:r}=await e;try{let e=await (0,l.H6)(r);return(0,t.jsxs)(i.f,{breadcrumbs:(0,t.jsx)(h,{data:e}),children:[(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(c.$,{asChild:!0,children:(0,t.jsxs)(o(),{href:`/projects/${s}/calls/add`,children:[(0,t.jsx)(p.A,{className:"mr-2 h-4 w-4"}),"Add call"]})}),(0,t.jsx)(c.$,{asChild:!0,variant:"outline",children:(0,t.jsxs)(o(),{href:`/projects/${s}/calls`,children:[(0,t.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"All calls"]})})]}),(0,t.jsx)("div",{className:"mx-auto h-full w-full max-w-3xl rounded-xl",children:(0,t.jsx)("div",{className:"flex flex-1 flex-col gap-4 px-4 py-10",children:(0,t.jsx)(d.default,{call:e,editCall:l.dk})})})]})}catch(e){return console.log("err: ",e),(0,t.jsx)("div",{children:"Error"})}}},94735:e=>{"use strict";e.exports=require("events")}};var s=require("../../../../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[6442,3174,7063,3805,9667,8910,1533,2998,6424,4901,4723,4307,7513,2904,7669],()=>r(21497));module.exports=t})();