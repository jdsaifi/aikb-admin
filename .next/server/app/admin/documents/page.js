(()=>{var e={};e.id=3327,e.ids=[3327],e.modules={1853:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>m});var s=t(69284),a=t(77457),n=t(50546),i=t(13585),d=t(46919),c=t.n(d),o=t(86557),l=t(7600),u=t(63636),f=t(2998);let p=()=>(0,s.jsx)(n.Qp,{children:(0,s.jsxs)(n.AB,{children:[(0,s.jsx)(n.J5,{children:(0,s.jsx)(n.tJ,{className:"line-clamp-1",children:(0,s.jsx)(c(),{href:"/",children:"Home"})})}),(0,s.jsx)(n.tH,{}),(0,s.jsx)(n.J5,{children:(0,s.jsx)(n.tJ,{className:"line-clamp-1",children:"Documents"})})]})});async function m(){await (0,u.SG)(["documents.view"]);let e=await (0,u.SG)(["documents.create"]),r=await (0,u.SG)(["documents.edit"]),t=await (0,u.SG)(["documents.delete"]);try{let n=await (0,l.x3)();return console.log("documents: ",n),(0,s.jsxs)(a.f,{breadcrumbs:(0,s.jsx)(p,{}),children:[(0,s.jsx)("div",{className:"flex justify-end",children:e&&(0,s.jsx)(i.$,{variant:"outline",asChild:!0,children:(0,s.jsxs)(c(),{href:"/admin/documents/add",children:[(0,s.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"Add Document"]})})}),(0,s.jsx)("div",{className:"flex flex-col gap-4 mt-5",children:n.length>0?(0,s.jsx)(f.DocumentTable,{documents:n,canEditDocument:r,canDeleteDocument:t,deleteDocument:l.Nn}):(0,s.jsx)("div",{className:"flex flex-col gap-4 text-center bg-muted p-5 rounded-md",children:(0,s.jsx)("p",{children:"No documents found"})})})]})}catch(e){return console.log("err: ",e),(0,s.jsx)("div",{children:"Error"})}}},2998:(e,r,t)=>{"use strict";t.d(r,{DocumentTable:()=>s});let s=(0,t(32120).registerClientReference)(function(){throw Error("Attempted to call DocumentTable() from the server but DocumentTable is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jdsaifi/Developer/Projects/divya-mvps/ai-kb-platform/apps/webapp/src/app/admin/documents/table.tsx","DocumentTable")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7600:(e,r,t)=>{"use strict";t.d(r,{Nn:()=>l,_L:()=>c,x3:()=>d,y4:()=>o});var s=t(63073);t(64959);var a=t(26236),n=t(92574),i=t(28551);let d=async()=>{let e=await (0,a.j2)();if(!e?.user)return[];try{return(await n.A.get("/documents",{headers:{Authorization:`Bearer ${e.jwt}`}})).data.data}catch(e){throw(e?.errorData).error.messages[0]}},c=async e=>{let r=await (0,a.j2)();return r?.user?(await n.A.get(`/documents/${e}`,{headers:{Authorization:`Bearer ${r.jwt}`}})).data.data[0]:[]},o=async(e,r)=>{let t=await (0,a.j2)();if(!t?.user)return[];let s=(await n.A.put(`/documents/${e}`,r,{headers:{Authorization:`Bearer ${t.jwt}`,"Content-Type":"application/json"}})).data;if("error"===s.status)throw Error(s.data[0].message);return s.data},l=async e=>{let r=await (0,a.j2)();if(!r?.user)return[];try{return(await n.A.delete(`/documents/${e}`,{headers:{Authorization:`Bearer ${r.jwt}`}})).data.data}catch(e){throw(e?.errorData).error.messages[0]}};(0,i.D)([d,c,o,l]),(0,s.A)(d,"7fb1d53df5b67c399b310a9a9c8f2a1298d64fd4c5",null),(0,s.A)(c,"7f45d22d0f39759c0ae9865d51fb8624c8e8c438ad",null),(0,s.A)(o,"7f333ffaf2eeda7d9cca50e70c985e82c6eaf73fc1",null),(0,s.A)(l,"7fba08bdc36b6b76063b7b74f8d2a80c253cb87891",null)},10525:(e,r,t)=>{"use strict";t.r(r),t.d(r,{"7f090f9e5a34fb1f7be8d888b9f14f870fdb2a0d7c":()=>i.m3,"7f0c88e06b3bad703ae193f0f52e050d3be0abe413":()=>i.JQ,"7f143444e3e400671830be6ce02b3ff1d3e9dbf1cc":()=>n.N$,"7f228af614aba0103daf10d4c57416d697ff32364b":()=>n.$$,"7f333ffaf2eeda7d9cca50e70c985e82c6eaf73fc1":()=>s.y4,"7f45d22d0f39759c0ae9865d51fb8624c8e8c438ad":()=>s._L,"7f49e83c0165e8d5d7cc80af01d567c6c8a92d2389":()=>i.lD,"7f5970b6c0de47a93832f40328853e89a90fa24ad4":()=>i.xr,"7f5a97f4138773f7d8f8713e6048ccd0fe6d20e7a2":()=>n.xA,"7f804d520220bdd31092be9af94ca7c8191040f035":()=>n.ip,"7f922df92c230b795598e30cad6e1589c7b6e93962":()=>i.oU,"7fac1e6f69684577729c62c70547d5c2bba4a86072":()=>i.eq,"7fb018cc823e171de450c7c5d722fd8e4049baedec":()=>i.tC,"7fb1d53df5b67c399b310a9a9c8f2a1298d64fd4c5":()=>s.x3,"7fba08bdc36b6b76063b7b74f8d2a80c253cb87891":()=>s.Nn,"7fbb8e4164106ecb89672208ff12b7e157dde22a52":()=>i.G6,"7fbf8ceed367c04425332882ac1b853950c858c14a":()=>a.j,"7fcacaf4d942fb25f7ee111fc3a1964d895c639f4b":()=>i.xx,"7fdc65967da6e1c64afb55a4baba88495fddfa28df":()=>i.By,"7fdffce87a84d5c83ee3356c6e33814b2d8fad3291":()=>n.SG,"7fe8be6f50d158bd0073e6601575b8573865633d7e":()=>i.vr});var s=t(7600),a=t(82553),n=t(63636),i=t(90546)},10705:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>l,routeModule:()=>f,tree:()=>o});var s=t(38756),a=t(71739),n=t(98483),i=t.n(n),d=t(53100),c={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>d[e]);t.d(r,c);let o={children:["",{children:["admin",{children:["documents",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,1853)),"/Users/jdsaifi/Developer/Projects/divya-mvps/ai-kb-platform/apps/webapp/src/app/admin/documents/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,62911)),"/Users/jdsaifi/Developer/Projects/divya-mvps/ai-kb-platform/apps/webapp/src/app/admin/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,91941))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,62615)),"/Users/jdsaifi/Developer/Projects/divya-mvps/ai-kb-platform/apps/webapp/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,92945,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,9932,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,73469,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,91941))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,l=["/Users/jdsaifi/Developer/Projects/divya-mvps/ai-kb-platform/apps/webapp/src/app/admin/documents/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},f=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/documents/page",pathname:"/admin/documents",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},16599:(e,r,t)=>{"use strict";t.d(r,{N:()=>n});var s=t(82966),a=t(4535);function n({date:e}){let[r,t]=(0,a.useState)("");return(0,s.jsx)("span",{children:r})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},47618:(e,r,t)=>{"use strict";t.d(r,{E:()=>c});var s=t(82966);t(4535);var a=t(94710),n=t(38646),i=t(83148);let d=(0,n.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c({className:e,variant:r,asChild:t=!1,...n}){let c=t?a.DX:"span";return(0,s.jsx)(c,{"data-slot":"badge",className:(0,i.cn)(d({variant:r}),e),...n})}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70018:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,46919,23)),Promise.resolve().then(t.bind(t,2998)),Promise.resolve().then(t.bind(t,60910)),Promise.resolve().then(t.bind(t,2376)),Promise.resolve().then(t.bind(t,71913))},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},88170:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,31533,23)),Promise.resolve().then(t.bind(t,97432)),Promise.resolve().then(t.bind(t,38501)),Promise.resolve().then(t.bind(t,80174)),Promise.resolve().then(t.bind(t,70303))},94735:e=>{"use strict";e.exports=require("events")},97432:(e,r,t)=>{"use strict";t.d(r,{DocumentTable:()=>b});var s=t(82966),a=t(79155),n=t(56995),i=t(31533),d=t.n(i),c=t(47358),o=t(42239),l=t(4535),u=t(16599),f=t(48736),p=t(75960),m=t(47618);function b({documents:e,canEditDocument:r,canDeleteDocument:t,deleteDocument:i}){let b=(0,f.useRouter)(),[h,x]=(0,l.useTransition)(),[v,j]=(0,l.useState)(!1),[g,w]=(0,l.useState)(null),y=e=>{w(e),j(!0)};return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:(0,s.jsxs)("strong",{children:[e.length," documents found"]})}),(0,s.jsxs)(n.XI,{children:[(0,s.jsx)(n.A0,{children:(0,s.jsxs)(n.Hj,{children:[(0,s.jsx)(n.nd,{children:"Name"}),(0,s.jsx)(n.nd,{children:"Policy"}),(0,s.jsx)(n.nd,{children:"Chunked"}),(0,s.jsx)(n.nd,{children:"Updated At"}),(0,s.jsx)(n.nd,{children:"..."})]})}),(0,s.jsx)(n.BF,{children:e.map(e=>(0,s.jsxs)(n.Hj,{children:[(0,s.jsx)(n.nA,{style:{maxWidth:"350px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.heading}),(0,s.jsx)(n.nA,{children:e.policy.allow_any_of_string.map(e=>(0,s.jsx)(m.E,{variant:"secondary",className:"mr-1 mb-1",children:e},e))}),(0,s.jsx)(n.nA,{children:e.isChunked?"Yes":"No"}),(0,s.jsx)(n.nA,{children:(0,s.jsx)(u.N,{date:e.updatedAt})}),(0,s.jsx)(n.nA,{children:(0,s.jsxs)(c.rI,{children:[(0,s.jsx)(c.ty,{asChild:!0,children:(0,s.jsx)(a.$,{variant:"outline",children:"Action"})}),(0,s.jsxs)(c.SQ,{className:"w-56",align:"start",children:[(0,s.jsx)(c.lp,{children:"Actions"}),(0,s.jsxs)(c.I,{children:[r&&(0,s.jsx)(c._2,{children:(0,s.jsx)(d(),{href:`/admin/documents/${e.id}/edit`,className:"cursor-pointer w-full",children:"Edit"})}),t&&(0,s.jsx)(c._2,{className:"cursor-pointer w-full",onClick:()=>y(e),children:"Delete"})]})]})]})})]},e.id))})]}),(0,s.jsx)(o.C,{onConfirm:()=>{g&&x(async()=>{try{p.oR.success("Document deleted successfully"),j(!1),w(null),b.refresh()}catch(e){p.oR.error(e.message||"Error deleting document")}})},open:v,onOpenChange:j,loading:h})]})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[6442,3174,7063,3805,9667,8910,1533,2998,6424,4901,4723,7513,2904,4946],()=>t(10705));module.exports=s})();